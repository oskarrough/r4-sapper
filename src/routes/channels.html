<p>We have {channels.length} channels.</p>

<ul>
	{#each channels as channel (channel.id)}
	<li><a href="{channel.slug}">{channel.title}</a></li>
	{/each}
</ul>

<button on:click={loadMore}>Load more</button>

<script context="module">
import {findChannels} from '../radio4000-sdk'

export async function preload(page, session) {
	// const cache = this.store.get().channels
	// console.log({cache})
	// if (cache) return {channels: cache}
	const channels = await findChannels(10)
	return {channels}
}

</script>

<script>
	export let channels
async function loadMore() {
	channels = await findChannels(channels.length + 20)
}
</script>
